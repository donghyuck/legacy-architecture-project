<?xml version="1.0" encoding="UTF-8"?>
<sql-queryset name="FRAMEWORK_WEB_UI_V2" description="Query for Web UI Componets.">

	<sql-query name="COUNT_ALL_MENU" comment="전체 메뉴 수"><![CDATA[
      select count(MENU_ID) from V2_MENU
      ]]></sql-query>
      
      
	<sql-query name="SELECT_ALL_MENU_IDS" comment="전체 메뉴 아이디"><![CDATA[
      select MENU_ID from V2_MENU
      ]]></sql-query>
      
            
	<sql-query name="COUNT_ENABLED_MENU" comment="전체 활성화된 메뉴 수"><![CDATA[
      select count(MENU_ID) from V2_MENU where enabled = 1
      ]]></sql-query>

	<sql-query name="SELECT_ENABLED_MENU_IDS" comment="전체 활성화된 메뉴 아이디"><![CDATA[
      select MENU_ID from V2_MENU where enabled = 1
      ]]></sql-query>
      
	<sql-query name="CREATE_MENU" comment="메뉴 생성"><![CDATA[
      INSERT INTO V2_MENU (
          MENU_ID, NAME, TITLE, LOCATION, ENABLED, CREATION_DATE, MODIFIED_DATE
      ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
      ]]></sql-query>
      
	<sql-query name="UPDATE_MENU" comment="메뉴 생성"><![CDATA[   
      UPDATE V2_MENU
	  SET
       NAME          = ?,
       TITLE         = ?,
       LOCATION      = ?,
       ENABLED       = ?,
       MODIFIED_DATE = ?
      WHERE  MENU_ID = ?      
      ]]></sql-query>      
            
	<sql-query name="SELECT_ALL_MENU" comment="전체  메뉴 조회"><![CDATA[
      select 
        MENU_ID, NAME, TITLE, LOCATION, ENABLED, CREATION_DATE, MODIFIED_DATE  
      from v2_menu
      ]]></sql-query>
                  
	<sql-query name="SELECT_ALL_ENABLED_MENU" comment="전체 활성화된 메뉴 조회"><![CDATA[
      select 
        MENU_ID, NAME, TITLE, LOCATION, ENABLED, CREATION_DATE, MODIFIED_DATE  
      from v2_menu where enabled = 1
      ]]></sql-query>

	<sql-query name="SELECT_MENU_BY_NAME" comment="이름으로 메뉴 조회"><dynamic><![CDATA[
      select MENU_ID, NAME, TITLE, LOCATION, ENABLED, CREATION_DATE, MODIFIED_DATE 
      from v2_menu 
      where <#if additional_parameter > LOWER(NAME) = ? <#else> NAME = ? </#if>
      ]]></dynamic></sql-query>

	<sql-query name="SELECT_MENU_BY_ID" comment="ID 로 메뉴 조회"><![CDATA[
      select MENU_ID, NAME, TITLE, LOCATION, ENABLED, CREATION_DATE, MODIFIED_DATE from v2_menu where menu_id = ?
      ]]></sql-query>      
            
	<sql-query name="SELECT_MENU_ITEMS_BY_ID" comment="ID 로 메뉴 아이템 조회"><![CDATA[
      select 
       MENU_ID, 
       MENU_ITEM_ID, 
       PARENT_ITEM_ID, 
       NAME, 
       TITLE, 
       LOCATION, 
       ENABLED, 
       IDX, 
       CREATION_DATE, 
       MODIFIED_DATE
      from V2_MENU_ITEM 
      where MENU_ID = ?
      order by PARENT_ITEM_ID , IDX
      ]]></sql-query>  
                  
	<sql-query name="DELETE_MENU_ITEMS" comment="메뉴 삭제"><![CDATA[
      delete v2_menu_item where menu_id = ? 
      ]]></sql-query> 
      
                 
	<sql-query name="CREATE_TABLE" comment="테이블  생성 스크립트"><![CDATA[ 
		
		<!-- COMMONS -->        
		
		CREATE TABLE V2_MENU (
		  MENU_ID                 INTEGER        NOT NULL,
		  NAME                    VARCHAR2(200)  NOT NULL,
		  TITLE                   VARCHAR2(200)  NOT NULL,
		  LOCATION                VARCHAR2(255)  NULL,
		  ENABLED                 NUMBER(1, 0)   DEFAULT 1, 
		  CREATION_DATE           DATE DEFAULT   SYSDATE NOT NULL,
		  MODIFIED_DATE           DATE DEFAULT   SYSDATE NOT NULL,		  
		  CONSTRAINT V2_MENU_PK PRIMARY KEY (MENU_ID)		  
		);
		
		CREATE UNIQUE INDEX V2_MENU_NAME_IDX ON V2_MENU (NAME);
		
		CREATE TABLE V2_MENU_ITEM (
		  MENU_ID                 INTEGER         NOT NULL,
		  MENU_ITEM_ID            INTEGER         NOT NULL,
		  PARENT_ITEM_ID		  INTEGER         NOT NULL,
		  NAME                    VARCHAR2(200)   NOT NULL,
		  TITLE                   VARCHAR2(200)   NOT NULL,
		  LOCATION                VARCHAR2(255)   NULL,
		  ENABLED                 NUMBER(1, 0)    DEFAULT 1, 
		  IDX                     INTEGER         NOT NULL,
		  CREATION_DATE           DATE DEFAULT    SYSDATE NOT NULL,
		  MODIFIED_DATE           DATE DEFAULT    SYSDATE NOT NULL,
		  CONSTRAINT V2_MENU_ITEM_PK PRIMARY KEY (MENU_ITEM_ID)		  
		);	
		
		CREATE UNIQUE INDEX V2_MENU_ITEM_IDX ON V2_MENU_ITEM (MENU_ID, MENU_ITEM_ID);
						     
    ]]></sql-query>


</sql-queryset>